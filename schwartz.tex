\input{chpreamble}
  \begin{savequote}
    ``May the Schwartz be with you!''
    \qauthor{--Yogurt, Space Balls}
  \end{savequote}
  \chapter{Topology on Schwartz Functions}
    \label{ch:topons}
    Our development of Schwartz functions and tempered distributions showed that these spaces have nice properties with regard to the Fourier transform.
    However, our discussion has mainly concerned itself with set-theoretic notions---that is, with the properties of elements of these spaces.
    We hope that these spaces are also nicely behaved with regard to \emph{topological} properties such as limits and continuity.
    Particularly, understanding \S as a topological space allows us to easily understand $\S^*$, as duals of topological spaces are well understood.

    \section{Spaces of Functions}
      \label{sec:spcoffunc}
      We are interested in \emph{topology} on spaces of functions, with the goal of finding a topology for the space of distributions.
      Recall:
      \begin{defn}
        A \emph{topological space} is a set $X$ and a set $\tau$ of subsets of $X$ that satisfies:
        \begin{itemize}
          \item The empty set $\emptyset$ and the whole space $X$ are elements of $\tau$,
          \item $\tau$ is closed under arbitrary union,
          \item $\tau$ is closed under finite intersection.
        \end{itemize}
        We call $\tau$ a \emph{topology on $X$}.

        Given a set $X$ with a \emph{metric} $d:X^2\rightarrow\R$, we take all sets of the form $\{x\in X:d(x,y)<\alpha\}$ for $y\in X$ and $\alpha\in\R$ as a basis for a set $\tau_d$, which is verifiably a topology on $X$.
      \end{defn}

      Working with this definition for arbitrary sets is not fun---it is only by taking advantage of additional structure on $X$ (such as a metric) that the topology is easily understood, in part because it allows us to apply physical intuition about \emph{size}. 
      We hope that we can find some structure in spaces of functions that will allow us to easily understand the topologies we work with.
      Recall:
      \begin{defn}
        A \emph{norm} on a vectorspace $X$ over a field $F$ is a function
        \begin{align*}
          |\cdot|_X:X\longrightarrow\R
        \end{align*}
        that satisfies for all $x,y\in X$, $a\in F$:
        \begin{itemize}
          \item Positive Scalability: $|ax|_X=|a|\cdot|x|_X$
          \item Triangle Inequality: $|x+y|_X\le|x|_X+|y|_X$
          \item Separation of points: $|x|_X=0\Longleftrightarrow x=0_X$.
        \end{itemize}
        Notationally, some subscripts are dropped and we distinguish between a norm and the real absolute-value function by context.
      \end{defn}

      Now suppose that $X$ is a normed vectorspace over $\C$.
      We define a metric on $X$ by $d(x,y)=|x-y|$, and so can define a topology on $X$ by means of this metric.
      This construction is particularly useful in our context, as sets of functions \emph{naturally} form vectorspaces over \C, by defining operations pointwise:
      \begin{align*}
        (f+g)(x) &= f(x)+g(x)\\
        (a\cdot f)(x) &= a\cdot f(x)
      \end{align*}
      As such, we need only introduce a concept of size (via a \emph{norm}) on functions in order to get a topology on a set of functions (supposing it is closed under vectorspace operations).
      Importantly though, we care much more about the resulting \emph{topology} than we do about the norm, as topology is a more general (and relevant) concept.

      Consider the space $C^0_0(\R)$ of complex-valued, continuous functions vanishing at infinity, which is a vectorspace over $\C$.
      Give $C^0_0(\R)$ the ``sup norm'' and its associated metric:
      \begin{align*}
        |f|_{C^0_0} &= \sup_{x\in\R}|f(x)|\\
        d(f,g) &= |f-g|_{C^0_0}
      \end{align*}
      It is trivial that the sup norm is positive-definite and obeys the triangle inequality, by properties of the absolute value and sup.
      Thus the following completes the proof that sup norm is in fact a norm:
      \begin{claim}
        The sup norm on $C^0_0(\R)$ is always finite.
        \begin{proof}
          Let $f\in C^0_0(\R)$, so it vanishes at infinity.
          Thus, given $\varepsilon>0$ we have $N>0$ such that $|x|>N\Rightarrow f(x)<\varepsilon$.
          This allows us to write
          \begin{align*}
            |f|_{C^0_0} &= \sup_{x\in\R}|f(x)|\\
            &= \max\left(\varepsilon,\,\sup_{|x|<N}|f(x)|\right)
          \end{align*}
          which is finite by the extreme value theorem.
        \end{proof}
      \end{claim}

      The simplicity of the following proof illustrates the naturalness of the sup norm applied to $C^0_0(\R)$.
      \todo{Why is this important?}
      \begin{claim}
        For $x\in\R$, the evaluation functional $C^0_0(\R)\rightarrow\C$ given by $f\mapsto f(x)$ is continuous.
        \begin{proof}
          Given $\varepsilon > 0$, $d(f,g)<\varepsilon \Rightarrow |f(x)-g(x)|<\varepsilon$ for all $x$, showing continuity.
  %        Given $\varepsilon > 0$, $d(f,g)<\varepsilon \Rightarrow |f(x)-g(x)|<\varepsilon$ because $\forall x$ $|f(x)-g(x)|\le\sup_{y\in\R}|f(y)-g(y)|=d(f,g)$.
  %        Thus the evaluation functional is continuous.
        \end{proof}
      \end{claim}

      Finally, we see that we have managed to construct a nicely behaved topological space:
      \begin{thm}
        \label{thm:c00complete}
        The space $C^0_0(\R)$ of continuous functions vanishing at infinity is \emph{complete}.
      \end{thm}
      \begin{proof}
        Consider a Cauchy sequence of $C^0_0$ functions $\{f_i\}$.
        First we will see that this sequence has a pointwise limit.

        Given $\varepsilon<0$ pick $N$ such that for $i,j>N$ we have $|f_i-f_j|<\varepsilon$.
        Then for any $x\in\R$, $|f_i(x)-f_j(x)|<\varepsilon$, and so the sequence of complex outputs $\{f_i(x)\}$ is Cauchy and has a limit $f(x)$.
        Thus the pointwise limit of $\{f_i\}$ is $f$.
       
        Now for $\varepsilon'>0$ take $j>N$ so that $|f_j(x)-f(x)|<\varepsilon'$.
        Then for $i>N$
        \begin{align*}
          |f_i(x)-f(x)|\le|f_i(x)-f_j(x)|+|f_j(x)-f(x)|<\varepsilon+\varepsilon'\text{.}
        \end{align*}
        Taking the limit as $\varepsilon'\rightarrow0$, we see $|f_i(x)-f(x)|<\varepsilon$ for \emph{all} $x$.
        Thus the convergence $\{f_i\}\rightarrow f$ is \emph{uniform} in $x$.
        Quoting the fact that the limit of continuous is continuous when convergence is uniform, we see that $f$ is continuous.\footnotemark

        It remains to show only that $f$ vanishes at infinity.
        Take $\varepsilon$ and $N$ as above, and fix some $i>N$.
        Then $|f_i(x)-f(x)|<\varepsilon$ for all $x$.
        Let $\varepsilon'>0$ and choose $M$ such that $|x|>M\Rightarrow |f_i(x)|<\varepsilon'$.
        Then
        \begin{align*}
          |f(x)|\le|f_i(x)-f(x)|+|f_i(x)|<\varepsilon+\varepsilon'\text{,}
        \end{align*}
        so for large $|x|$, we can make $f(x)$ arbitrarily small, and so $f\in C^0_0$.
      \end{proof}
      \footnotetext{This is easily verified by combining the inequalities above with the continuity of the $f_i$.}
      \begin{rmk}
        Thus, being complete with respect to the topology arising from a norm, $C^0_0(\R)$ is a \emph{Banach} space, by definition.
      \end{rmk}
      \begin{rmk}
        Note that this completeness is a consequence of our norm forcing sequences of functions to converge \emph{uniformly}.
        This is particularly important as pointwise limits of continuous functions need not be continuous!
      \end{rmk}

    \subsection{Spaces of differentiable functions}
      We now turn to the issue of \emph{differentiability}.
      For $k>0$ define the space 
      \begin{align*}
        C^k_0(\R) = \{f\in C^0_0(\R) : f'\in C^{k-1}_0(\R)\}
      \end{align*}
      Note that this definition requires that all $k+1$ derivatives $f,f',\ldots,f^{(k)}$ be $C^0_0$, and so they are \emph{all} continuous and vanish at infinity.
      Give $C^k_0(\R)$ the topology of the $C^k$-norm:
      \begin{align*}
        |f|_{C^k} = \sum_{0\le i\le k} |f^{(i)}|_{C^0} = \sum_{0\le i\le k} \sup_{x\in\R}|f^{(i)}(x)|
      \end{align*}
      Note that for $k=0$, this is exactly the $C^0$ norm.
      \begin{rmk}
        The $C^k$ norm (or ``sum~sup'' norm) gives the same topology as the ``sup~sup'' norm:
        \begin{align*}
          |f|=\sup_{0\le i\le k}|f^{(i)}|_{C^0_0}=\sup_{0\le i\le k}\sup_{x\in\R}|f^{(i)}(x)|
        \end{align*}
        because for complex numbers $a_1,\ldots,a_k$
        \begin{align*}
          \sup_i a_i \le \sum_i a_i \le (k-1) \sup_i a_i\text{.}
        \end{align*}
        Thus the two can be used interchangeably, as we are concerned only with the resultant topology.
      \end{rmk}
      \begin{rmk}
        \todo{differentiation: $C^k_0\rightarrow C^{k-1}_0$ is continuous}
      \end{rmk}
      \begin{thm}
        \label{thm:ck0complete}
        $C^k_0(\R)$ is complete in the $C^k$-norm topology.
      \end{thm}
      \begin{proof}
        Consider the case $k=1$; this will extend inductively to all $k$.
        Let $\{f_i\}$ be Cauchy in $C^k_0$.
        Because both sequences $\{f_i\}$ and $\{f_i'\}$ are in $C^0_0$, by definition of the $C^0_0$ (sup) norm and $C^k_0$ norm, each is Cauchy in $C^0_0$.
        Thus by \thref{thm:c00complete} each sequence converges uniformly pointwise, so we can write:
        \begin{align*}
          &f(x)=\lim_n f_i(x) &g(x)=\lim_n f_i'(x)
        \end{align*}
        We now hope to show that $f$ is differentiable, and so an element of $C^k_0$.
        Since each $f_i$ is continuous and differentiable, write
        \begin{align*}
          f_i(x)-f_i(a) = \int_a^x f_i'(t)\,dt
        \end{align*}
        Taking the limit, and exchanging limit and integral (by the Lebesgue Dominated Convergence Theorem)
        \begin{align*}
          \lim_i f_i(x)-f_i(a) &= \lim_i\int_a^x f_i'(t)\,dt\\
          &= \int_a^x\lim_if_i(t)\,dt\\
          f(x)-f(a) &= \int_a^x g(t)\,dt
        \end{align*}
        so by the fundamental theorem of calculus, $f'=g$, and so $f\in C^k_0$.
      \end{proof}

    \subsection{Spaces of decaying functions}
      \label{sec:decayfunc}
      Now consider the issue of \emph{decay}.
      Recall that Schwartz functions are \emph{rapidly decaying}, so their product with any power of $x$ vanishes at infinity.
      For $\ell\ge0$ define (for now)
      \begin{align*}
        C^0_\ell(\R) = \{f\in C^0_0(\R):(1+x^2)^\ell f(x)\in C^0_0\}
      \end{align*}
      with the norm:
      \begin{align*}
        |f| = |(1+x^2)^\ell f|_{C^0_0} = \sup_{x\in\R} |(1+x^2)^\ell f(x)|
      \end{align*}
      These definitions are slightly ugly -- secretly we want the $(1+x^2)$ to be an $x$, but importantly $(1+x^2)^\ell\ge1$ for all $x$ and $\ell$.
      As the next proof shows, this is important!
      Replacing $(1+x^2)^\ell$ with $x^\ell$ in the definition would allow our functions to be misbehaved near the origin, which would allow us to construct a non-convergent Cauchy sequence.
      \begin{thm}
        \label{thm:c0lcomplete}
        $C^0_\ell(\R)$ is complete in its topology.
      \end{thm}
      \begin{proof}
        Take a Cauchy sequence of $C^0_\ell$ functions $\{f_i\}$.
        Because each $f_i\in C^0_0$ we want to say that $\{f_i\}$ has a pointwise limit $f$ that itself is $C^0_0$, as in the proof of \thref{thm:c00complete}.
        However, this only holds if $\{f_i\}$ is Cauchy in $C^0_0$. 

        By hypothesis, given $\varepsilon>0$ there exists $N>0$ such that for all $i,j>N$
        \begin{align*}
          |(1+x^2)^\ell f_i - (1+x^2)^\ell f_j|_{C^0_0} < \varepsilon
        \end{align*}
        Calculate 
        \begin{align*}
          |(1+x^2)^\ell f_i - (1+x^2)^\ell f_j|_{C^0_0}
          &= \sup_{x\in\R}(1+x^2)^\ell|f_i(x)-f_j(x)|\\
          &\ge \sup_{x\in\R}|f_i(x)-f_j(x)|\\
          &= |f_i-f_j|_{C^0_0}
        \end{align*}
        So $|f_i-f_j|_{C^0_0}<\varepsilon$, and so $\{f_i\}\rightarrow f\in C^0_0$.
        Thus it remains only to show that $(1+x^2)^\ell f(x)$ is $C^0_0$.
        
        By hypothesis the sequence $\{(1+x^2)^\ell f_i\}$ in $C^0_0$ is Cauchy.
        Then it has a limit in $C^0_0$, say $g$.
        We hope that $g(x)=(1+x^2)^\ell f(x)$.
        For $\varepsilon>0$ use the fact that \emph{both} sequences are Cauchy to pick $i$ so that $|(1+x^2)^\ell f_i - g|<\varepsilon$ and $|f_i - f|<\varepsilon$.
        Fix some $x\in\R$.
        Then
        \begin{align*}
          |g(x) - (1+x^2)^\ell f(x)| &\le |(1+x^2)^\ell f_i(x) - g(x)|+|(1+x^2)^\ell||f_i(x)-f(x)|\\
          &< \varepsilon + |(1+x^2)^\ell|\varepsilon
        \end{align*}
        Because $x$ is fixed we can force $|g(x)-(1+x^2)^\ell f(x)|$ to become arbitrarily small, and so we conclude that $g(x)=(1+x^2)^\ell f(x)$.
        Thus $(1+x^2)^\ell f$ is $C^0_0$, and so $f\in C^0_\ell$.
      \end{proof}

      With the basic cases proved, we now hope to define a Banach space that is parameterized by both smoothness and decay properties.
      We define
      \begin{align*}
        C^k_\ell(\R) = \{f\in C^k_0(\R):(1+x^2)^\ell f^{(i)}(x)\in C^{k-i}_0\text{ for all } i\le k\}
      \end{align*}
      with the norm
      \begin{align*}
        |f|_{C^k_\ell} = |(1+x^2)^\ell f|_{C^k} = \sum_{0\le i\le k} \sup_{x\in\R} |(1+x^2)^\ell f^{(i)}(x)|
      \end{align*}
      Note that for $k=0$, $C^k_\ell=C^0_\ell$, and their respective norms agree.
      \begin{thm}
        \label{thm:cklcomplete}
        $C^k_\ell(\R)$ is complete in its topology.
      \end{thm}
      \begin{proof}
        Again we consider the case of $k=1$ and allow the argument to extend inductively.\todo{give this some attention to make it solid}

        Take $\{f_i\}$ to be Cauchy in $C^k_\ell$.

        We want to show that the sequence is Cauchy in another norm, as in \thref{thm:c0lcomplete}.
        By hypothesis, given $\varepsilon>0$ there exists $N>0$ such that for all $i,j>N$
        \begin{align*}
          |(1+x^2)^\ell f_i - (1+x^2)^\ell f_j|_{C^k} < \varepsilon
        \end{align*}
        Calculate
        \begin{align*}
          |(1+x^2)^\ell f_i - (1+x^2)^\ell f_j|_{C^k}
          &= \sum_{0\le h\le k}\sup_{x\in\R}(1+x^2)^\ell|f_i^{(h)}(x)-f_j^{(h)}(x)|\\
          &\ge \sum_{0\le h\le k}\sup_{x\in\R}|f_i^{(h)}(x)-f_j^{(h)}(x)|\\
          &= |f_i-f_j|_{C^k}
        \end{align*}
        Thus $\{f_i\}$ is Cauchy in $C^k_0$.
        From \thref{thm:ck0complete} we then see that $\{f_i\}$ is Cauchy in $C^k_0$ and so $\{f_i\}\rightarrow f$ in $C^k_0$ and $\{f_i'\}\rightarrow g$ in $C^{k-1}_0$ with $f'=g$.

        We now only need to show that $(1+x^2)^\ell f\in C^k_0$ and $(1+x^2)^\ell g\in C^{k-1}_0$.
        If we can show that $\{f_i\}$ is Cauchy in $C^0_\ell$ then we'll see that $(1+x^2)^\ell f\in C^0_0$ by \thref{thm:c0lcomplete}.
        Similarly, if we show that $\{f_i'\}$ is Cauchy in $C^0_\ell$, we'll see that $(1+x^2)^\ell g\in C^0_0$, and can use that fact to show that $(1+x^2)^\ell f$ is in fact in $C^k_0$.
        Calculate
        \begin{align*}
          |(1+x^2)^\ell f_i - (1+x^2)^\ell f_j|_{C^k}
          &= \sum_{0\le h\le k}\sup_{x\in\R}(1+x^2)^\ell|f_i^{(h)}(x)-f_j^{(h)}(x)|\\
          &\ge \sup_{x\in\R}(1+x^2)^\ell|f_i(x)-f_j(x)|
        \end{align*}
        which is exactly the norm of $f_i-f_j$ in $C^0_\ell$.
        The same inequality with first derivatives allows us to see that both sequences are indeed Cauchy in $C^0_\ell$, and so $(1+x^2)^\ell f$ and $(1+x^2)^\ell g$ are elements of $C^0_0$.

        Finally we calculate
        \begin{align*}
          \frac{d}{dx}(1+x^2)^\ell f(x)
          &= (1+x^2)^\ell f'(x) + \ell(1+x^2)^{\ell-1}2xf(x)\\
          &\le (1+x^2)^\ell g(x) + 2\ell(1+x^2)^\ell f(x)
        \end{align*}
        We have just shown that both summands are $C^0_0$, and so vanish at infinity.
        Thus, by the definition of $C^k_0$, $f\in C^k_0$, and so $C^k_\ell$ is complete in its topology, and thus Banach.
      \end{proof}

    \section{\S as a topological limit}
      
      From \thref{thm:cklcomplete} we have that for all $k,\ell>0$, the space $C^k_\ell$ of $k$-times differentiable functions decaying faster than $(1+x^2)^\ell$ is a Banach space (complete normed vectorspace).
      We hope that the space of Schwartz functions is exactly the (projective) limit of these spaces, but we must show that such a doubly-indexed limit is still topologically well-behavedolds the correct topology.

      To take the limit we must first define transition maps $\varphi^{k,k-1}_\ell$ and $\phi^k_{\ell,\ell-1}$:
      \begin{displaymath}
        \xymatrix{
          C^1_1  & C^2_1 \ar[l]_{\varphi^{21}_1} & C^3_1 \ar[l]_{\varphi^{32}_1} & \cdots \ar[l]_{\varphi^{43}_1} \\
          C^1_2 \ar[u]_{\phi^1_{21}} & C^2_2 \ar[l]_{\varphi^{21}_2} \ar[u]_{\phi^2_{21}} & \cdots \ar[l]_{\varphi^{32}_2} \ar[u]_{\phi^3_{21}} \\
          C^1_3 \ar[u]_{\phi^1_{32}} & \cdots \ar[l]_{\varphi^{21}_3} \ar[u]_{\phi^2_{32}} \\
          \cdots \ar[u]_{\phi^1_{43}} 
        }
      \end{displaymath}
      To meet the limit definition these maps must be continuous and compatible.
      \todo{prove that inclusions are continuous and compatible}
      \todo{make the point that limits are intersections}
\end{document}

\input{chpreamble}
  \chapter{Distributions}
  \label{ch:dist}
  
  With a firm grasp of the topology of \S, we now turn back to topological issues.
  Recall from \cref{sec:tempdist} that continuous linear dual of \S is the space of \emph{tempered distributions}:
  \begin{align*}
    \S^* = \{f:\S\rightarrow\C\,\vert\,f\text{ is continuous and linear}\}
  \end{align*}
  This definition is now fully sensible, as we know what it means to be a continuous functional on \S.
  Recall the mapping taking a test function $\varphi$ to the integration-against-$\varphi$ functional on \S:
  \begin{align*}
    \varphi \longmapsto \left( \phi \mapsto \int_{x\in\R} \varphi(x) \phi(x)\,dx \right)
  \end{align*}
  We hope that this map takes elements of \S into elements of $\S^*$, as we might expect it to.
  \begin{thm}
    The integration-against functional is continuous and linear.
    Thus, the mapping above gives an inclusion $\S\rightarrow\S^*$.
  \end{thm}
  \begin{proof}
    Linearity follows trivially from the definition.
    Thus we need only show that small inputs give small outputs, and continuity everywhere will follow from linearity.
    Fix some $\varphi\in\S$ and let $\{\phi_i\}$ be a sequence in \S approaching the zero function (which is trivially Schwartz).
    See that
    \begin{align*}
      |\langle\varphi,\phi_i\rangle| 
%      &= \left|\int_{x\in\R} \varphi(x)\phi_i(x)\,dx\right|
      &\le \int_{x\in\R}| \varphi(x)\phi_i(x)|\,dx
      \\&\le |\phi_i|_{C^k_\ell}\cdot\int_{x\in\R}|\varphi(x)|\,dx
    \end{align*}
    for any $k$ and $\ell$, by definition of the $C^k_\ell$ norm.
    Because $\{\phi_i\}$ approaches zero in \S, we see that $\{|\phi_i|_{C^k_\ell}\}$ also approaches zero.
    Thus the sequence $\{\langle\varphi,\phi_i\rangle\}$ approaches zero in \C, so the functional is continuous.
  \end{proof}

  The continuity of the integration-against functional shows that each Schwartz function corresponds naturally to a tempered distribution.
  In \cref{sec:tempdist} we saw that this inclusion allowed us to define the Fourier transform for any $f\in\S^*$ by the formula
  \begin{align*}
    \langle\F f, \varphi\rangle &= \langle f, \F\varphi\rangle
  \end{align*}
  for $\varphi\in\S$.
  
  We may define the derivative of a tempered distribution similarly.
  For Schwartz functions $f$ and $\varphi$, apply integration by parts and observe that $f\varphi$ vanishes at infinity:
  \begin{align*}
    \langle f', \varphi\rangle
    &= [f(x)\varphi(x)]_{-\infty}^\infty -\int_{x\in\R} f(x)\varphi'(x)\,dx
    = -\langle f,\varphi'\rangle\text{.}
  \end{align*}
  \begin{defn}
    For a tempered distribution $u$, the distributional derivative of $u$ (denoted as usual by $u'$) is given by
    \begin{align*}
      \langle u', \varphi\rangle = -\langle u, \varphi'\rangle
    \end{align*}
    for any Schwartz function $\varphi$.
    When $u$ corresponds to a Schwartz function $f$, the distribution $u'$ visibly corresponds to the derivative $f'\in\S$ by the calculation above. 
  \end{defn}
  
  As with the Fourier Transform, the definition of the distributional derivative extends good properties of \S to all of $\S^*$.
  It is immediately obvious that any tempered distribution has infinitely many derivatives which are all themselves tempered distributions.
  We might also expect that, as on $\S$, the differentiation map is continuous on $\S^*$, but this involves topology on $S^*$, which we have not yet developed.
  We thus give the space of tempered distributions the so-called ``initial topology'', which allows us to carry topology from a space to its dual.
  \begin{defn}
    Let $X^*$ be the continuous linear dual of a topological space $X$.
    The initial topology on $X^*$ with respect to its linear dual, also called the \emph{weak-* topology} is the coarsest topology (the one with the fewest open sets) ensuring the continuity of the evaluation functionals
    \begin{gather*}
      X^*\longrightarrow\C\\
      u\mapsto \langle u,\varphi\rangle\qquad\text{for }\varphi\in X\text{.}
    \end{gather*}
  \end{defn}

  \begin{claim}
    The differentiation map $D:\SS\rightarrow\SS$ is continuous under the \ws.
  \end{claim}
  \begin{proof}
    Consider a sequence of tempered distributions $\{u_i\}$ that converges to zero.
    By definition of the \ws, we have for any Schwartz function $\varphi$, the sequence $\{\langle u_i,\varphi\rangle\}$ converges to zero by continuity of the evaluation-at-$\varphi$ functional.
    Thus the sequence $ \{\langle Du_i, \varphi\rangle\} = \{-\langle u_i, \varphi'\rangle\} \rightarrow 0 $ and so $\{Du_i\}\rightarrow 0$ in the \ws.
  \end{proof}

  \section{Approximation by Schwartz Functions}
    A simple distribution is Dirac delta:
    \begin{gather*}
      \delta:\S\rightarrow\C\\
      \langle\delta,\varphi\rangle = \varphi(0)
    \end{gather*}
    Because $\delta$ is trivially linear, and continuous by \cref{thm:sevalcts}, $\delta\in\SS$.
    In fact, $\delta$ is not a classical function, and so is a ``true distribution'' in that it does not arise from a function with pointwise values.
    If $\delta$ were a classical function of any sort, we would have
    \begin{gather*}
      \delta(x)=0\text{ for }x\ne0\\
      \int_{x\in\R} \delta(x)\,dx = 1
    \end{gather*}
    but for any $z=\delta(0)\in\C$ the integral must be zero.
    However, $\delta$ may be approximated by Schwartz functions, in the sense that there is a sequence $\{\phi_n\}$ in \S so that for any $\varphi\in\S$
    \begin{align*}
      \langle \phi_n, \varphi\rangle \underset{n}{\longrightarrow} \varphi(0)\text{.}
    \end{align*}

    \begin{thm}[Approximate Identity]
      There is a sequence $\{\phi_n\}$ in \S so that $\lim_n \phi_n = \delta$.
    \end{thm}
    \begin{proof}
      Let $\phi$ be some positive Schwartz function with integral 1, so that for any $n\in\mathbb{N}_{>0}$, the function $x\mapsto n\phi(nx) \call \phi_n$ is Schwartz and has integral 1.
      Consider for some arbitrary $\varphi\in\S$:
      \begin{align*}
        \lim_{n\rightarrow\infty}\langle\phi_n,\varphi\rangle 
        &=\lim_{n\rightarrow\infty}\int_{x\in\R} \phi_n(x)\varphi(x)\,dx\text{.}
      \end{align*}
      We hope this converges to $\varphi(0)$.
      First, we bound error in the integral away from the origin.
      Fix some $\varepsilon>0$ and for any $\rho>0$ let 
      \begin{align*}
        \sup_{|x|>\rho} |\varphi(x)| = C_\rho \text{.}
      \end{align*}
      As $n$ grows the integral $\int_{x\in\R}\phi_n(x)$ is constantly 1, so
      \begin{align*}
        \int_{|x|>\rho} \phi_n(x)\,dx
        = 1-n\cdot\int_{|x|\le n\rho} \phi(x)\,dx
        \le 1-\int_{|x|\le n\rho} \phi(x)\,dx
        \underset n\longrightarrow 0 \text{.}
      \end{align*}
      Use this convergence to pick $N$ so that for $n>N$
      \begin{align*}
        \int_{|x|>\rho} \phi_n(x)\,dx
        < \frac\varepsilon{C_\rho}
      \end{align*}
      and so
      \begin{align*}
        \int_{|x|>\rho} \phi_n(x)\varphi(x)\,dx
        &\le C_\rho \cdot \int_{|x|>\rho} \phi_n(x)\,dx
        < \varepsilon \text{,}
      \end{align*}
      showing that
      \begin{align*}
        \lim_{n\rightarrow\infty} \int_{|x|>\rho} \phi_n(x)\varphi(x)\,dx
        = 0 \text{.}
      \end{align*}

      It remains to show that the integral on $[-\rho,\rho]$ converges to the desired value.
      By the continuity of $\varphi$, there is some $\delta_\rho$ so that $|x|\le\rho$ implies $|\varphi(x)-\varphi(0)|<\delta_\rho$, so
      \begin{align*}
        (\varphi(0)-\delta_\rho)\cdot \int_{|x|\le\rho} \phi_n(x)\,dx
        \le \int_{|x|\le\rho} \phi_n(x)\varphi(x)\,dx
        \le (\varphi(0)+\delta_\rho)\cdot \int_{|x|\le\rho} \phi_n(x)\, dx
      \end{align*}
      Taking the limit of the bounds as $n$ grows the integrals approach one, so
      \begin{align*}
        \left| \int_{|x|\le\rho} \phi_n(x)\varphi(x)\,dx - \varphi(0) \right|
        < \delta_\rho
      \end{align*}
      As $\rho\rightarrow0$ continuity forces $\delta_\rho$ to zero, and so
      \begin{align*}
        \lim_{n\rightarrow\infty} \left| \int_{x\in\R} \phi_n(x)\varphi(x)\,dx - \varphi(0) \right|
        = \lim_{\rho\rightarrow 0} \delta_\rho
        = 0 \text{.}
      \end{align*}
    \end{proof}

    The fact that approximate identities exist implies a much stronger result---that \emph{any} tempered distribution may be approximated by Schwartz functions in the \ws.

    \begin{thm}
      \label{thm:sdenseinss}
      The space of Schwartz functions is dense\footnotemark in the space of tempered distributions.
    \end{thm}
    \footnotetext{Recall that a subset $A$ of a topological space $X$ is called \emph{dense in $X$} if for any $x\in X$, every neighborhood of $x$ contains an element of $A$. This is equivalent to the condition that any $x\in X$ is the limit of a sequence in $A$.}
    \begin{proof}
      Let $u\in\SS$.
      Let $\phi$ be an even Schwartz function with integral 1, so that for any $n$, the function $x\mapsto n\phi(nx) \call \phi_n$ has integral 1, so $\{\phi_n\}\rightarrow\delta$.
      Thus the sequence of mollifications $\{u*\phi_n\}$ approximates $u$ in the \ws because for all $\psi\in\S$, 
      \begin{align*}
        \langle u*\phi_n, \psi\rangle = \langle u, \phi_n*\psi\rangle \underset{n}{\longrightarrow} \langle u,\psi\rangle \text{.}
      \end{align*}

      Each $u*\phi_n$ is Schwartz by properties of convolution, so because $u$ was arbitrary, \S is dense in \SS.
    \end{proof}
    \todo{introduce convolution on $\SS{\times}\S$ (using \cref{defn:convolution}) before we use it}

\end{document}

\input{chpreamble}
  \setcounter{chapter}{2}
  \setcounter{thm}{0}
  \chapter{Distributions}
  \label{ch:dists}
  
  With a firm grasp of the topology of \S, we now turn back to topological issues.
  Recall from \cref{sec:tempdist} that continuous linear dual of \S is the space of \emph{tempered distributions}:
  \begin{align*}
    \S^* = \{f:\S\rightarrow\C\,\vert\,f\text{ is linear and continuous}\} \text{.}
  \end{align*}
  This definition is now fully sensible, as we know what it means to be a continuous functional on \S.
  Recall the mapping taking a Schwartz function $\varphi$ to the integration-against-$\varphi$ functional on \S:
  \begin{align*}
    \varphi \longmapsto \left( \phi \mapsto \int_{x\in\R} \varphi(x) \phi(x)\,dx \right) \text{.}
  \end{align*}
  We hope that this map takes elements of \S into elements of $\S^*$, as we might expect it to.
  \begin{thm}
    \label{thm:intagainstiscont}
    For any $\varphi\in\S$ the integration-against-$\varphi$ functional on \S is linear and continuous.
    Thus the mapping above gives an inclusion of sets $\S\rightarrow\S^*$.
  \end{thm}
  \begin{proof}
    Linearity follows trivially from the definition.
    Thus we need only show that small inputs give small outputs, and continuity everywhere will follow from linearity.
    Let $\{\phi_i\}$ be a sequence in \S approaching the zero function.
    Then
    \begin{align*}
      \left|\int_{x\in\R} \varphi(x)\phi_i(x)\,dx\right|
      \le |\varphi|_{L^1}\cdot |\phi_i|_\Coo \text{.}
    \end{align*}
    Because $\{\phi_i\}$ approaches zero in \S, $\{|\phi_i|_\Coo\}$ approaches zero in $\R_{\ge0}$.
    Thus $\{\langle \varphi,\phi_i\rangle\}$ approaches zero in \C, so the functional is continuous.
  \end{proof}
  The proof above trivially shows that any $L^1$-integrable function $f$ gives rise to a tempered distribution by integration-against, even if $f$ fails to be Schwartz.
  However, we wonder if there is some even larger family of classical functions that has such an inclusion into \SS.
  Recall that \S is closed under multiplication by powers of $x$.
  In fact, for a sequence $\{\phi_i\}\rightarrow 0$ in \S and any $\ell\in\Z_{>0}$, see that $\{(1+x^2)^\ell\phi_i(x)\}\rightarrow 0$ for any fixed $x\in\R$, and so by \cref{thm:sevalcts} $\{(1+x^2)^\ell\phi_i\}\rightarrow 0$.
  Thus, pretending that some function $f$ does give rise to a distribution $u_f$, write for any $\ell\in\Z_{>0}$:
  \begin{align*}
    |\langle u_f,\phi_i\rangle| 
    = \int_{x\in\R} \left( (1+x^2)^\ell\phi_i(x) \right) \cdot \left( (1+x^2)^{-\ell} f(x) \right) \,dx
  \end{align*}
  which approaches zero as $i$ grows, provided the integral is finite.
  Thus a classical function $f$ gives rise to a tempered distribution $u_f$ if there is an $\ell$ so that $(1+x^2)^{-\ell}f$ times any Schwartz function is $L^1$-integrable.

  \begin{defn}
    A continuous function $f$ is called a \emph{slowly increasing function} if there exists some $\ell\in\Z_{\ge0}$ so that
    \begin{align*}
      \lim_{|x|\rightarrow\infty} \left| \frac{f(x)}{(1+x^2)^{\ell}} \right| \,dx < \infty \text{.}
    \end{align*}
    If $f$ is infinitely differentiable and all of its derivatives (including the zeroth) are slowly increasing, then $f$ is called a \emph{fairly good function}.
  \end{defn}
  See that any slowly increasing function $f$ gives rise to a tempered distribution $u_f$ by integration-against-$f$ because the product of slowly increasing and Schwartz is \li:
  \begin{lemma}
    \label{lemma:sitimesschwartzli}
    Suppose that $f$ is a slowly increasing function.
    Then for any $g\in\S$, the product $fg$ is \li.
  \end{lemma}
  \begin{proof}
    Because $f$ is slowly increasing there is some $\ell$ so that the function $(1+x^2)^\ell f$ is bounded.
    Thus there is some $B$ so that $|(1+x^2)^{-\ell} f(x)|<B$ for all $x\in\R$.
    So calculate
    \begin{align*}
      \int_{x\in\R} |(fg)(x)|\,dx
%      = \int_{x\in\R} |(1+x^2)^\ell g(x)\cdot(1+x^2)^{-\ell} f(x)|\,dx
      < B\cdot \int_{x\in\R} (1+x^2)^\ell |g(x)|\,dx
    \end{align*}
    which is finite because $g$ is Schwartz.
  \end{proof}
  \begin{lemma}
    Suppose that $f$ is a fairly good function.
    Then for any $g\in\S$, the product $fg$ is Schwartz.
  \end{lemma}
  \begin{proof}
    The product of smooth functions is smooth and so we need only show that the product (and its derivatives) decay quickly.
    For any $\ell>0$ see that $(1+x^2)^\ell (fg)(x) = \left(f\cdot((1+x^2)^\ell g)\right)(x)$ which is integrable by \cref{lemma:sitimesschwartzli}.
    Thus $(1+x^2)^\ell fg$ vanishes at infinity for any $\ell$.
    By the product rule, any derivative $fg^{(i)}$ is a sum of fairly good times Schwartz, and so each term vanishes independently at infinity.
    Thus $fg$ is Schwartz.
  \end{proof}

  Notably, any polynomial is a fairly good function, and so gives rise to a tempered distribution.
  However, the exponential function $e^x$ is smooth but not slowly increasing, as it grows faster than any power of $x$ for large $x$.
%  We wonder if the converse of this is also true, so the only functions giving rise to distributions are slowly increasing functions.
%
%  \begin{thm}
%    If a distribution $u$ is given by integration against a classical function $f$, then $f$ is slowly increasing
%  \end{thm}
%  \begin{proof}
%    For any Schwartz function $\varphi$, the quantity
%    \begin{align*}
%      | \langle u, \varphi\rangle |
%      &= \left| \int_{x\in\R} f(x)\varphi(x)\,dx \right|
%      \call C
%    \end{align*}
%    is finite.
%  \end{proof}

  \section{Adjoint Identities and Topology on \SS}
    The continuity of the integration-against functional shows that each Schwartz function gives rise to a tempered distribution.
    In \cref{sec:tempdist} we saw that this inclusion allowed us to define the Fourier transform on \SS by the formula
    \begin{align*}
      \langle\F u, \varphi\rangle &= \langle u, \F\varphi\rangle
      \qquad u\in\SS, \varphi\in\S \text{.}
    \end{align*}
    
    We may define the derivative of a tempered distribution similarly.
    For Schwartz functions $f$ and $\varphi$, apply integration by parts and observe that because $f\varphi$ vanishes at infinity:
    \begin{align*}
      \langle f', \varphi\rangle
      &= \int_{x\in\R} f'(x)\varphi(x)\,dx
      = -\int_{x\in\R} f(x)\varphi'(x)\,dx
      = -\langle f,\varphi'\rangle\text{.}
    \end{align*}
    \begin{defn}
      For a tempered distribution $u$, the distributional derivative of $u$ (denoted as usual by $u'$) is given by
      \begin{align*}
        \langle u', \varphi\rangle = -\langle u, \varphi'\rangle
        \qquad u\in\SS,\varphi\in\S \text{.}
      \end{align*}
      When $u$ is given by (integration against) a Schwartz function $f$, the distribution $u'$ is given by the derivative $f'\in\S$ by the calculation above. 
    \end{defn}
    
    As with the Fourier Transform, the definition of the distributional derivative extends good properties of \S to all of $\S^*$.
    It is immediately obvious that any tempered distribution has infinitely many derivatives which are all themselves tempered distributions.
    We might also expect that, as on $\S$, the differentiation map is continuous on $\S^*$, but this involves topology on $S^*$, which we have not yet developed.
    We thus give the space of tempered distributions the so-called ``initial topology'', which allows us to carry topology from a space to its dual.
    \begin{defn}
      Let $X^*$ be the continuous linear dual of a topological space $X$.
      The initial topology on $X^*$ with respect to its linear dual, also called the \emph{weak-* topology} is the coarsest topology ensuring that for all $\varphi\in X$ the evaluation functional
      \begin{gather*}
        u_\varphi: X^*\rightarrow\C, \qquad f\mapsto\langle f,\varphi\rangle
      \end{gather*}
      is continuous.
    \end{defn}

    \begin{claim}
      The differentiation map $D:\SS\rightarrow\SS$ is continuous under the \ws.
    \end{claim}
    \begin{proof}
      Consider a sequence of tempered distributions $\{u_i\}$ that converges to zero.
      By definition of the \ws, we have for any Schwartz function $\varphi$, the sequence $\{\langle u_i,\varphi\rangle\}$ converges to zero by continuity of the evaluation-at-$\varphi$ functional.
      Thus the sequence $ \{\langle Du_i, \varphi\rangle\} = \{-\langle u_i, \varphi'\rangle\} \rightarrow 0 $ and so $\{Du_i\}\rightarrow 0$ in the \ws.
    \end{proof}

    \begin{thm}
      The inclusion $\S\rightarrow\SS$ given by $\varphi\longmapsto\left( \phi\mapsto \int_{x\in\R} \varphi(x)\phi(x)\,dx \right)$ is linear and continuous, and thus gives an inclusion of topological vectorspaces.
    \end{thm}
    \begin{proof}
      Linearity is immediate from the definition and continuity follows from the same inequality as \cref{thm:intagainstiscont} with $\varphi$ and $\phi$ exchanged.
    \end{proof}

  \section{Approximation by Schwartz functions}
  \subsection{Approximating classical functions}
    Consider the space \D of smooth functions with compact support (i.e. they are uniformly zero for sufficiently large inputs).
    Such functions are clearly Schwartz, and in fact form a dense\footnotemark subspace of \S, as we will see.
    \footnotetext{Recall that a subset $A$ of a topological space $X$ is called \emph{dense in $X$} if for any $x\in X$, every neighborhood of $x$ contains an element of $A$.}
    \D is called the space of \emph{test functions}; its dual $\D^*$ is a space of distributions that is larger than \SS.

    See that test functions exist because the function
    \begin{equation*}
      \label{eq:extestfcn}
      h(x) =
      \begin{cases}
        e^\frac{1}{x^2-1} &\text{if }|x|<1\\
        0 &\text{otherwise}
      \end{cases}
    \end{equation*}
    is verifiable smooth at any $x\in\R$ and is identically zero off a bounded set, and so is Schwartz.
    The function $h(x)$ is a prototypical test function.
    
    A \emph{mesa function} is non-negative real test function that has constant value on a subset of the line and decays smoothly to zero outside that set.
    See that such functions exist because the integral of $h$,
    \begin{align*}
      \int_{-\infty}^x h(t)\,dt
    \end{align*}
    has value 0 for $x$ to the left of $-1$ and grows smoothly on $[-1,1]$ to a positive constant, which it takes for all $x>1$.
    Glueing this function to a translated and mirrored version of itself gives a mesa function.
    Mesa functions allow us to approximate smooth functions with test functions, as the next two lemmas show.

    \begin{figure}[t]
      \begin{center}
        \begin{sagesilent}
          from matplotlib import ticker
          h = lambda x: e^(1/(x^2-1))
          g = Piecewise([[(.5,1), 0],[(1,2), h(x-2)/h(0)], [(2,5), 1], [(5,6), h(x-5)/h(0)], [(6,6.5), 0]])
          p = plot(g, color="black", plot_points=500, ticks=[[1, 2, 5, 6],[]], tick_formatter= ticker.FixedFormatter(['$-A_i-1$','$-A_i$','$A_i$','$A_i+1$']), figsize=[6,1])
        \end{sagesilent}
        \sageplot[width=\figwidth]{p}
      \end{center}
      \caption{An example mesa function $\psi_i$.}
      \label{fig:mesafunc}
    \end{figure}

    \begin{lemma}
      \label{lemma:ddenseins}
      The space of test functions is dense in the space of Schwartz functions.
    \end{lemma}
    \begin{proof}
      Let $\{A_i\}$ be a sequence of positive real numbers that approaches infinity and for any~$i$ let $\psi_i$ be an \emph{even} mesa function that is identically 1 on $[-A_i,A_i]$ and identically zero outside $[-A_i-1,A_i+1]$, as shown in \cref{fig:mesafunc}.
      On the segments $[-A_i-1,-A_i]$ and $[A_i,A_i+1]$ where $\psi_i$ is transitioning between taking value $0$ and value $1$, we require that each $\psi$ transitions in the same way.
      That is, for any indices $i$ and $j$, and a real $x\in[0,1]$ we have
      \begin{align*}
        \psi_i(A_i+x) = \psi_j(A_j+x) \text{.}
      \end{align*}
      Thus for any $k\ge0$ the $k^{\text{th}}$ derivative $\psi_i^{(k)}$ is bounded, and the bound is independent of $i$.

      Given some $\varphi\in\S$, for any $i$ the function $\psi_i\varphi$ is a test function because it is zero for $|x|>A_i+1$ and pointwise multiplication of functions does not affect smoothness.
      Thus it remains only to show that $\{\psi_i\varphi\}\rightarrow\varphi$ in \S; this is the case whenever the sequence converges in every \Ckl.
      Recall
      \begin{align*}
        |\psi_i\varphi - \varphi|_\Ckl
        &= \sum_{0\le j\le k} \sup_{x\in\R} (1+x^2)^\ell |(\psi_i\varphi-\varphi)^{(j)}(x)| \text{.}
      \end{align*}
      See that any derivative $(\psi_i\varphi-\varphi)^{(j)}$ is a sum has one term that is Schwartz ($\varphi^{(j)}$), and the remaining terms are the product of a Schwartz function with a test function.
      As $i$ grows we hope that all these terms vanish individually because the supremum of a sum is less than or equal to the sum of the suprema.
      We may ignore the $(1+x^2)^\ell$ by grouping it with the Schwartz part of each term, as any Schwartz function times $(1+x^2)^\ell$ is still Schwartz.

      First group the Schwartz-only term with the matching term $\psi_i\varphi^{(j)}$ and see that 
      \begin{align*}
        \sup_{x\in\R} |\psi_i(x)\varphi^{(j)}(x)-\varphi^{(j)}(x)|
        &= \sup_{x\in\R} |(\psi_i(x)-1)|\cdot|\varphi^{(j)}(x)|
        = \sup_{|x|>A_i} |(\psi_i(x)-1)|\cdot|\varphi^{(j)}(x)|
      \end{align*}
      approches zero as $i$ grows because $\psi_i-1$ remains bounded while $\varphi^{(j)}$ approaches zero.
      
      The remaining terms have the form
      \begin{align*}
        \sup_{x\in\R} |\varphi^{(m)}(x)\psi_i^{(n)}(x)|
      \end{align*}
      where $m+n=j$ and $n>0$.
      By hypothesis $\psi_i^{(n)}$ is zero off $\pm[A_i,A_i+1]$ and is bounded by a quantity that is independent of $i$.
      As $i$ grows, $\sup_{|x|\in[A_i,A_i+1]}\varphi^{(m)}(x)$ dies faster than any power of $A_i$.
      Thus the term approaches zero as $i$ grows, so $|\psi_i\varphi-\varphi|_\Ckl \underset{i}{\rightarrow}0$.
    \end{proof}
    In the world of tempered distributions, mesas allow us to approximate those distributions arising from classical functions.
    \begin{lemma}
      \label{lemma:ddenseinssfromsmooth}
      Let $u_f$ be a tempered distribution given by integrating against a smooth function $f$.
      Then there is a sequence of test functions $\{\phi_i\}$ that gives (via integration-against) a sequence of distributions approximating $u_f$ in the \ws.
    \end{lemma}
    \begin{proof}
      Let $\{\psi_i\}$ be a sequence of mesa functions as above, and define $\phi_i$ by $\phi_i(x) = \psi_i(x)f(x)$.
      See that each $\phi_i$ is test because it is smooth and vanishes identically for large $|x|$.
      Identifying the $\phi_i$ with the corresponding tempered distributions, calculate for any $\varphi\in\S$
      \begin{align*}
        \langle \phi_i, \varphi\rangle
        &= \int_{x\in\R} \psi_i(x)f(x)\varphi(x)\,dx
        = \langle u_f, \psi_i\varphi\rangle
        \underset{i}{\rightarrow} \langle u_f, \varphi\rangle
      \end{align*}
      by the continuity of evaluation and \cref{lemma:ddenseins}
    \end{proof}

  \subsection{Approximating simple distributions}
    Recall the Dirac delta distribution:
    \begin{gather*}
      \langle\delta,\varphi\rangle = \varphi(0)
      \qquad\text{for any }\varphi\in\S \text{.}
    \end{gather*}
    Because $\delta$ is trivially linear, and continuous by \cref{thm:sevalcts}, $\delta\in\SS$.
    Similarly, for any $x\in\R$, $\delta_x\in\SS$ is given by $\langle\delta_x,\varphi\rangle=\varphi(x)$.
    Thinking of $\delta$ as an infinitesimally narrow spike with area 1 we wonder if $\delta$ may be approximated by Schwartz functions, in the sense that there is a sequence $\{\phi_n\}$ in \S so that for any $\varphi\in\S$
    \begin{align*}
      \langle \phi_n, \varphi\rangle \underset{n}{\longrightarrow} \varphi(0)\text{.}
    \end{align*}
    Because $\{\langle\phi_n,\varphi\rangle\}\rightarrow\langle\delta,\varphi\rangle$ for arbitrary $\varphi\in\S$, by definition $\{\phi_n\}\rightarrow\delta$ in the \ws.

    \begin{defn}[Test Approximate Identity]
      A sequence of test functions $\{\phi_n\}$ is called a \emph{test approximate identity} whenever
      \begin{itemize}
        \item $\phi_n(x)$ is non-negative and real for all $n$ and $x\in\R$;
        \item $\int_{x\in\R}\phi_n(x)\,dx=1$ for all $n$;
        \item for any $\rho>0$ there exists some $N$ so that for all $n>N$ 
          \begin{align*}
            \phi_n(x) = 0 \text{ whenever } |x|\ge\rho \text{.}
          \end{align*}
      \end{itemize}
      Because any approximate identity we make use of will consist of  test functions, the term ``approximate identity'' is taken to mean a test approximate identity.
    \end{defn}
    The idea of an approximate identity is to construct a sequence of functions with constant ``mass'' 1 that clusters tightly around zero as $n$ increases.
    Intuitively the limit of such a function is exactly $\delta$: a unit point-mass gathered at zero.

    \begin{thm}[Approximate Identity Theorem]
      \label{thm:approxid}
      Given a test approximate identity $\{\phi_n\}$, $\lim_n \phi_n = \delta$ in the \ws.
    \end{thm}
    \begin{proof}
      For an arbitrary $\varphi\in\S$ we hope that
      \begin{align*}
        \langle\phi_n,\varphi\rangle 
        &=\int_{x\in\R} \phi_n(x)\varphi(x)\,dx
        \underset{n}{\longrightarrow}\varphi(0) \text{.}
      \end{align*}
      See that the difference is
      \begin{align*}
        |\langle\phi_n,\varphi\rangle - \varphi(0)|
        &=\left| \int_{x\in\R} \phi_n(x)(\varphi(x)-\varphi(0))\,dx \right|
        \le \int_{x\in\R} \phi_n(x)|\varphi(x)-\varphi(0)|\,dx \text{.}
      \end{align*}
      Given $\varepsilon>0$, there is some $\delta>0$ so that $|x|<\delta$ implies $|\varphi(x)-\varphi(0)|<\varepsilon$.
      For large $n$, $\phi_n$ is uniformly zero off $[-\delta,\delta]$, so
      \begin{align*}
        |\langle\phi_n,\varphi\rangle - \varphi(0)|
%        \le \int_{|x|<\delta} \phi_n(x)|\varphi(x)-\varphi(0)|\,dx
        < \varepsilon \cdot \int_{x\in\R} \phi_n(x)\,dx
        = \varepsilon \text{.}
      \end{align*}
    \end{proof}

    Having seen that any approximate identity approximates $\delta$ it remains to show that such a sequence exists.
    Some scaled version of the function $h$ from \cref{eq:extestfcn} is a non-negative test function having integral 1 and vanishing off of $[-1,1]$, so that for any $n\in\Z_{>0}$, the function $x\mapsto n\phi(nx) \call \phi_n$ is is a non-negative test function having integral 1 and vanishing off of $[-1/n,1/n]$.
    Thus, clearly, $\{\phi_n\}$ is an approximate identity.

    The fact that approximate identities exist implies a much stronger result---that \emph{any} tempered distribution may be approximated by Schwartz functions in the \ws.
    To see this, we must first recall a method for ``smoothing'' functions.

  \subsection{Smoothing distributions}
    Because $\S$ is a locally convex, quasi-complete topological vectorspace (by virtue of being Fr\'echet), for some locally compact measure space $X$ with finite Borel measure $\mu$, compactly supported continuous maps $a:X\rightarrow\S$ have a Gelfand--Pettis integral\footnote{Proving that the \gp integral exists for such spaces is quite technical. See \citet{vvint} for a presentation of this argument.}
    \begin{align*}
      A = \int_X a(x)\,d\mu(x) \in\S
    \end{align*}
    that satisfies for any $v\in\SS$
    \begin{align*}
      \langle v, A\rangle
      &= \int_X \langle v, a(x)\rangle\,d\mu(x) \text{.}
    \end{align*}
    This identity allows us to manipulate integrals involving distributions, which will allow us to approximate arbitrary distributions.

    Recall from \cref{defn:convolution} that the convolution of two functions $f$ and $g$ is a function given by
    \begin{align*}
      (f*g)(x) = \int_{y\in\R} f(x-y)g(y)\,dy \text{.}
    \end{align*}
    For Schwartz functions $f$ and $g$ we may write the convolution more suggestively:
    \begin{align*}
      (f*g)(x) = \int_{y\in\R} (T_y\inv f)(x)g(y)\,dy \text{.}
    \end{align*}
    We thus hope to define the convolution of $f$ and $g$ by the \gp integral
    \begin{align*}
      \int_\R (T_y\inv f)g(y)\,dy \text{.}
    \end{align*}
    Supposing the integral exists, see that it gives the convolution $f*g$ because
    \begin{align*}
      \langle\delta_x, \int_\R (T_y\inv f)g(y)\,dy\rangle 
      = \int_\R (T_y\inv f)(x)g(y)\,dy \text{.}
    \end{align*}
    However, proving the integral exists is a difficult claim, as the existence of the Gelfand--Pettis integral depends on integrating over a compact set with finite measure.

    \begin{claim}
      \label{claim:GPconv}
      For $f,g\in\S$, the map $a(y)=g(y)T_y\inv f$ has a Gelfand--Pettis integral.
    \end{claim}
    \begin{proof}
      First, noting that $a$ clearly extends continuously to $a(\infty)=0$, we expand its domain to the circle $X=\R\cup\{\infty\}$, which is compact.
      To ensure that $X$ has finite measure, define
      \begin{align*}
        d\mu(x) = |x-i|^{-(1+\varepsilon)}\,dx \text{.}
      \end{align*}
      Correspondingly, we modify our function to be
      \begin{align*}
        b(x) = |x-i|^{1+\varepsilon} g(y)T_y\inv f
      \end{align*}
      so that
      \begin{align*}
        \int_X b(x)\,d\mu(x)
        &= \int_{X} |x-i|^{1+\varepsilon} g(y)T_y\inv f\,d\mu(y)
        = \int_{\R} a(y)\,dy
      \end{align*}
      exists in \S.
      Thus we have for any $v\in\SS$
      \begin{align*}
        \langle v, \int_X b(y)\,d\mu(y) \rangle
        &= \int_X \langle v, g(y)T_y\inv f\rangle\, dy
        = \int_{y\in\R} \langle v, g(y)T_y\inv f\rangle\, dy
      \end{align*}
      and so
      \begin{align*}
        \langle \delta_x, \int_{\R} a(y)\,dy \rangle
        &= \int_{y\in\R} g(y)f(x-y)\,dy \text{.}
      \end{align*}
      Thus the convolution of Schwartz functions is given by equivalent Gelfand--Pettis integrals:
      \begin{align*}
        f*g = g*f = \int_\R f(x)T_x\inv g\,dx = \int_\R g(x)T_x\inv f\,dx \text{.}
      \end{align*}
    \end{proof}

    While defining convolution in terms of the Gelfand--Pettis integral requires some attention to details, the characterizing property that it commutes with linear operators will prove useful.

    Because the convolution of two Schwartz functions is given by a \gp integral it is a Schwartz function, and so \S acts on itself by convolution.
    It is almost immediate that this action allows approximation of any Schwartz function by convolution with an approximate identity:
    \begin{lemma}
      \label{lemma:approxbyconv}
      For an approximate identity $\{\phi_n\}$ and any $g\in\S$, the sequence of convolutions $\{\phi_n*g\}$ approximates $g$ in \S.
    \end{lemma}
    \begin{proof}
      We need only show that $\phi_n*g\rightarrow g$ in every \Ckl.
      Calculate
      \begin{align*}
        |\phi_n*g - g|_\Ckl
        &= \sum_{0\le j\le k} \sup_{x\in\R} (1+x^2)^\ell |(\phi_n*g - g)^{(j)}(x)| \text{.}
      \end{align*}
      Thus it suffices to show that each derivative approaches zero in the sup-norm topology.
      As in the proof of \cref{lemma:ddenseins} we may ignore the $(1+x^2)^\ell$ by grouping it with $g$, as $(1+x^2)^\ell g\in\S$.
      Calculate
      \begin{align*}
        \frac{d}{dx} \langle \delta_x, \phi_n*g\rangle
        &= \frac{d}{dx}\int_{\R} \phi_n(y)g(x-y)\,dy
        = \int_{y\in\R} \phi_n(y)g'(x-y)\,dy
        = \langle \delta_x, \phi_n*g'\rangle
      \end{align*}
      and so the derivative is exactly $\phi_n*g^{(j)}-g^{(j)}$.
      Calculate for any $x\in\R$
      \begin{align*}
        \langle \delta_x, \phi_n*g^{(j)}-g^{(j)}\rangle
        &= \int_\R  \phi_n(y-x)(g^{(j)}(y)-g^{(j)}(x))\,dy \text{.}
      \end{align*}
      Because $g^{(j)}$ is Schwartz, it is uniformly continuous on \R.
      Thus when $x$ and $y$ are close, the quantity $g^{(j)}(y)-g^{(j)}(x)$ is small, independently of the value of $x$.
      So for large $n$, when the support of $\phi_n$ (as a function of $y$) is contained in a sufficiently small neighborhood of $x$, the integral is small.
      Thus the \Ckl-norm of $\phi_n*g-g$ approaches zero, and so $\phi_n*g\underset{n}{\rightarrow}g$ in \S.
    \end{proof}

    We hope to use a process similar to convolution to approximate tempered distributions.
    The action of \S on itself naturally gives an action of \S on its embedded image in \SS.
    For some $f\in\S$, the commutative diagram  
    \begin{displaymath}
      \xymatrix{
        \S \ar[r]^{\text{incl.}} \ar[d]^{f*} & \SS \ar@{..>}[d]^{f\cdot}
        \\ \S \ar[r]_{\text{incl.}} & \SS
      }
    \end{displaymath}
    makes the action clear.
    For some $g\in\S$, $f$ acts on the distribution $u_g$ arising from $g$ by
    \begin{align*}
      f\cdot u_g = u_{f*g} \text{.}
    \end{align*}
    For any $\varphi\in\S$ we have
    \begin{align*}
      \langle f\cdot u_g, \varphi\rangle
      &= \int_{x\in\R} \int_{y\in\R} f(x-y)g(y)\,dy\,\varphi(x)\,dx
      \\&= \int_{y\in\R} g(y) \int_{x\in\R} f(x-y)\varphi(x)\,dx\,dy
      \\&= \langle u_g, \tilde f*\varphi\rangle
    \end{align*}
    where $\tilde f(x) = f(-x)$.
    The definition of convolution extends by this formula to allow one of the arguments to be a distribution by an adjoint definition.
    Define the action of a Schwartz function $\phi$ on a distribution $u$ by the identity
    \begin{align*}
      \langle \phi\cdot u, \varphi\rangle
      = \langle u, \tilde\phi*\varphi\rangle \text{.}
    \end{align*}
    Notably, unlike the convolution of Schwartz functions, this action is asymmetric, as we may not convolve two distributions.
    Thus we refer to the distribution $\phi\cdot u$ as the \emph{mollification} of $u$ by $\phi$.

    We might wonder if a mollification is in fact given by integration against some classical function.
    Again letting $f,g\in\S$, write
    \begin{align*}
      (f*g)(x)
      &= \int_{y\in\R} f(x-y)g(y)\,dy
%      \\&= \int_{y\in\R} T_{-x}\tilde f(y) g(y)\, dy
      = \langle g, T_{-x}\tilde f\rangle
    \end{align*}
    which suggests a sensible expression for pointwise values of the mollification if $g$ were a tempered distribution.
    For $u\in\SS$ and $\phi\in\S$ we wonder if the function
    \begin{align*}
      \psi(x) = \langle u, T_{-x}\tilde\phi\rangle
    \end{align*}
    gives rise to the distribution $\phi\cdot u$ defined above.
    Calculate for any $\varphi\in\S$
    \begin{align*}
      \langle \psi, \varphi \rangle
      &= \int_{x\in\R} \langle u,T_{-x}\tilde\phi\rangle\varphi(x)\,dx
      = \langle u, \int_{x\in\R} (T_{-x}\tilde\phi)\varphi(x)\,dx \rangle
      = \langle u, \tilde\phi*\varphi\rangle
    \end{align*}
    with the second equality using the properties of the Gelfand--Pettis integral of $\varphi(x)T_{-x}\tilde\phi$, which exists by \cref{claim:GPconv}.
    Thus $\phi\cdot u$ is in fact a classical function with pointwise values given by $(\phi\cdot u)(x)=\psi(x)=\langle u, T_{-x}\tilde\phi\rangle$.

    Because $f\mapsto\tilde f$ is continuous (null sequences map to null sequences), translation is continuous (\cref{claim:translcont}), and $u$ is continuous, see that the composition
    \begin{align*}
      x, \phi \mapsto x, \tilde\phi \mapsto T_{-x}\phi \mapsto \langle u, T_{-x}\phi \rangle
    \end{align*}
    is a continuous function of $x\in\R$.
    Thus we may calculate that the derivative of $\phi\cdot u$ at any $x\in\R$ is given by
    \begin{align*}
      \lim_{t\rightarrow0} \frac{\psi(x+t) - \psi(x)}{t}
      &= \lim_{t\rightarrow0} \frac{\langle u, T_{-x-t}\phi-T_{-x}\phi\rangle}{t}
      = \langle u, \lim_{t\rightarrow0} \frac{T_{-x-t}\phi-T_{-x}\phi}{t} \rangle
      = \left\langle u, T_{-x}\phi'\right\rangle
    \end{align*}
    and so $\phi\cdot u$ is a smooth function because we may put all derivatives on the Schwartz function~$\phi$.
    Thus mollification is a sort of ``smoothing'' process on distributions---regardless of how strange the distribution $u$ is, the mollification $\phi\cdot u$ is smooth enough to have pointwise values.
    Furthermore, this smoothing acts as we expect it to, in that we may approximate any distribution by convolution with approximate identity. 

    \begin{lemma}
      \label{lemma:mollwithid}
      For an approximate identity $\{\phi_n\}$ and some tempered distribution $u$, the mollification $\phi_\cdot *u$ approximates $u$ in the \ws.
    \end{lemma}
    \begin{proof}
      For all $f\in\S$, calculate and apply \cref{lemma:approxbyconv} to see
      \begin{align*}
        \langle \phi_n\cdot u, f\rangle
        &= \langle u, \phi_n*f\rangle
        \underset{n}{\longrightarrow} \left\langle u, T_xf(0) \right\rangle
        = \langle u,f\rangle \text{.}
      \end{align*}
    \end{proof}

    Any tempered distribution may be approximated by a sequence of smooth functions (mollifications).
    Unfortunately, arbitrary mollifications need not be Schwartz functions; they might only be fairly good functions that never vanish as $x$ grows.
    Recall from \cref{lemma:ddenseinssfromsmooth} that arbitrary smooth functions may be approximated by test functions.
    Thus we may approximate any tempered distribution by Schwartz functions:

    \begin{thm}
      \label{thm:sdenseinss}
      The space of Schwartz functions is dense in the space of tempered distributions.
    \end{thm}
    \begin{proof}
      Let $u\in\SS$.
      Now pick a neighborhood $U$ of $u$ in \SS.
      Because the sequence $\{\phi_n*u\}\rightarrow u$ by \cref{lemma:mollwithid} there is some $n$ so that $\phi_n*u\in U$.
      By \cref{lemma:ddenseinssfromsmooth}, there is some mesa function $\psi$ so that $\psi(\phi_n*u)\in U$.
      Because $\psi(\phi_n*u)$ is test (and thus Schwartz) and $u$ and $U$ were arbitrary, \S is dense in \SS.
    \end{proof}

\end{document}
